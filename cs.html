<!DOCTYPE html>
<html>
  <head> </head>

  <body>
    <canvas id="canvas" width="450" height="200"></canvas><br />
    <script>
      canvas = document.getElementById('canvas');
      ctx = canvas.getContext('2d');
      var infiniteImage, infiniteImageWidth;
      img = document.createElement('img');
      offsetLeft = 0;
      async function a() {
        img.onload = async function () {
          tempCanvas = document.createElement('canvas');
          tempCtx = tempCanvas.getContext('2d');
          tempCanvas.width = img.width * 2;
          tempCanvas.height = img.height;
          tempCtx.drawImage(img, 0, 0);
          tempCtx.save();
          tempCtx.translate(tempCanvas.width, 0);
          tempCtx.scale(-1, 1);
          tempCtx.drawImage(img, 0, 0);
          tempCtx.restore();
          infiniteImageWidth = img.width * 2;
          infiniteImage = document.createElement('img');
          infiniteImage.onload = async function () {
            await pan();
          };
          infiniteImage.src = tempCanvas.toDataURL();
        };
        img.crossOrigin = 'anonymous';
        img.src = 'https://aloycwl.github.io/lsg_frontend/img/vl.png';
      }

      async function pan() {
        offsetLeft += 2;
        if (offsetLeft > infiniteImageWidth) offsetLeft = 0;
        ctx.drawImage(infiniteImage, -offsetLeft, 0);
        ctx.drawImage(infiniteImage, infiniteImage.width - offsetLeft, 0);
        setTimeout(function () {
          pan();
        }, 1);
      }
      a();
    </script>
  </body>
</html>
